<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>후원하기 - RE:</title>
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RWS3BEEQ84"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-RWS3BEEQ84');
    </script>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9257454501555292"
         crossorigin="anonymous"></script>
    
    <!-- CSS - 새 시스템 적용 -->
    <link rel="stylesheet" href="src/css/base/variables.css?v=20241118003">
    <link rel="stylesheet" href="src/css/base/base.css">
    <link rel="stylesheet" href="src/css/base/layout.css">
    <link rel="stylesheet" href="src/css/components/components-base.css?v=20241118003">
    <link rel="stylesheet" href="src/css/components/components-layout.css">
    <link rel="stylesheet" href="src/css/components/header-unified.css">
    <link rel="stylesheet" href="src/css/components/glass-effects.css">
    <link rel="stylesheet" href="src/css/components/toast.css">
    <link rel="stylesheet" href="src/css/components/common-page-layout.css">
    <link rel="stylesheet" href="src/css/pages/donate-refactored.css?v=20241118004">
    <link rel="stylesheet" href="src/css/components/glass-theme-fix.css?v=20241118003">
    
    <!-- 인라인 스타일 제거 완료 -->
</head>
<body>
    <!-- Toast 알림 -->
    <div id="toast" class="toast"></div>
    
    <!-- 공통 Header (JS로 자동 생성) -->
    <div class="header"></div>

    <div class="document-container donate-container">
        <div class="donate-header">
            <div class="donate-icon">☕</div>
            <h1>응원이 큰 힘이 됩니다</h1>
            <p>상담보고서 도우미가 도움이 되셨나요?<br>소중한 후원이 더 나은 서비스를 만듭니다.</p>
        </div>

        <div class="message-box glass-card">
            <p>후원해주신 금액은 <span class="highlight">100% 서비스 개선</span>에 사용됩니다.</p>
            <p>AI 비용, 서버 유지, 새로운 기능 개발 등</p>
        </div>

        <!-- 탭 메뉴 -->
        <div class="tabs glass-panel">
            <button class="tab active" onclick="switchTab('toss')">💳 토스</button>
            <button class="tab" onclick="switchTab('kakao')">💛 카카오페이</button>
        </div>

        <!-- 토스 탭 -->
        <div id="toss-content" class="tab-content active">
            <div class="buttons-grid">
                <a href="#" class="donation-btn" onclick="openToss(3900); return false;">
                    <div class="btn-left">
                        <div class="btn-icon">☕</div>
                        <div class="btn-label">
                            <div class="btn-title">커피 한 잔</div>
                            <div class="btn-desc">따뜻한 응원 한 잔</div>
                        </div>
                    </div>
                    <div class="btn-amount">3,900원</div>
                </a>

                <a href="#" class="donation-btn" onclick="openToss(7900); return false;">
                    <div class="btn-left">
                        <div class="btn-icon">🍰</div>
                        <div class="btn-label">
                            <div class="btn-title">디저트까지</div>
                            <div class="btn-desc">특별한 감사의 마음</div>
                        </div>
                    </div>
                    <div class="btn-amount">7,900원</div>
                </a>

                <a href="#" class="donation-btn" onclick="openToss(9900); return false;">
                    <div class="btn-left">
                        <div class="btn-icon">🍜</div>
                        <div class="btn-label">
                            <div class="btn-title">한 끼 식사</div>
                            <div class="btn-desc">든든한 후원</div>
                        </div>
                    </div>
                    <div class="btn-amount">9,900원</div>
                </a>
            </div>

            <div class="custom-section">
                <div class="custom-label">💝 원하는 금액으로 후원하기</div>
                <div class="custom-input-group">
                    <input type="number" id="customAmountToss" class="custom-input" placeholder="금액 입력" min="1000" step="100">
                    <div class="currency">원</div>
                </div>
                <button class="btn btn--primary btn--medium custom-btn" onclick="sendCustomAmountToss()">후원하기</button>
            </div>

            <div class="donate-footer">
                <p>💳 <strong>토스 송금</strong>으로 간편하게 후원하실 수 있습니다.</p>
                <div class="account-info">
                    <span>🏦 토스뱅크 1000-0532-8518 (김도현)</span>
                    <button class="copy-btn" onclick="copyTossAccount()">복사</button>
                </div>
                <p class="donate-notice">
                    ※ 버튼을 클릭하면 토스 앱이 열립니다.<br>
                    (토스 미설치 시 계좌번호가 복사됩니다)
                </p>
            </div>
        </div>

        <!-- 카카오페이 탭 -->
        <div id="kakao-content" class="tab-content">
            <div class="buttons-grid">
                <div class="donation-btn" onclick="copyAndNotifyKakao('3900')">
                    <div class="btn-left">
                        <div class="btn-icon">☕</div>
                        <div class="btn-label">
                            <div class="btn-title">커피 한 잔</div>
                            <div class="btn-desc">따뜻한 응원</div>
                        </div>
                    </div>
                    <div class="btn-amount">3,900원</div>
                </div>

                <div class="donation-btn" onclick="copyAndNotifyKakao('7900')">
                    <div class="btn-left">
                        <div class="btn-icon">🍰</div>
                        <div class="btn-label">
                            <div class="btn-title">디저트까지</div>
                            <div class="btn-desc">특별한 감사</div>
                        </div>
                    </div>
                    <div class="btn-amount">7,900원</div>
                </div>

                <div class="donation-btn" onclick="copyAndNotifyKakao('9900')">
                    <div class="btn-left">
                        <div class="btn-icon">🍜</div>
                        <div class="btn-label">
                            <div class="btn-title">한 끼 식사</div>
                            <div class="btn-desc">든든한 후원</div>
                        </div>
                    </div>
                    <div class="btn-amount">9,900원</div>
                </div>
            </div>

            <div class="custom-section">
                <div class="custom-label">💝 원하는 금액으로 후원하기</div>
                <div class="custom-input-group">
                    <input type="number" id="customAmountKakao" class="custom-input" placeholder="금액 입력" min="1000" step="100">
                    <div class="currency">원</div>
                </div>
                <button class="btn btn--primary btn--medium custom-btn" onclick="sendCustomAmountKakao()">후원하기</button>
            </div>

            <div class="donate-footer">
                <div class="account-info">
                    <span>🏦 토스뱅크 1000-0532-8518 (김도현)</span>
                    <button class="copy-btn" onclick="copyKakaoAccount()">복사</button>
                </div>

                <div class="method-info">
                    <h3>💛 카카오페이에서 송금하는 방법</h3>
                    <ol>
                        <li>카카오톡 앱 실행 → 하단 더보기(···)</li>
                        <li>Pay → 송금 → 계좌번호 입력</li>
                        <li>금액 입력 → 송금하기</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- 하단 홈으로 돌아가기 -->
        <div class="page-footer">
            <a href="index.html" class="btn-home">홈으로 돌아가기</a>
        </div>
    </div>

    <script src="js/ui-utils.js"></script>
    <script src="js/common-components.js"></script>
    
    <script>
        // 계좌 정보
        const TOSS_ACCOUNT = '1000-0532-8518';
        const ACCOUNT_HOLDER = '김도현';

        // 탭 전환
        function switchTab(tab) {
            // 모든 탭과 컨텐츠 비활성화
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

            // 선택한 탭 활성화
            event.target.classList.add('active');
            document.getElementById(tab + '-content').classList.add('active');
        }

        // 토스 송금
        function openToss(amount) {
            const tossUrl = `supertoss://send?bank=토스뱅크&accountNo=${TOSS_ACCOUNT}&amount=${amount}&msg=상담보고서도우미후원`;
            
            if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                window.location.href = tossUrl;
                
                setTimeout(() => {
                    if (confirm('토스 앱이 설치되어 있지 않습니다.\n계좌번호를 복사하시겠습니까?')) {
                        copyToClipboard(`토스뱅크 ${TOSS_ACCOUNT} (${ACCOUNT_HOLDER}) ${amount.toLocaleString()}원`);
                        showToast('계좌번호가 복사되었습니다!\n토스 앱에서 직접 송금해주세요.');
                    }
                }, 3000);
            } else {
                copyToClipboard(`토스뱅크 ${TOSS_ACCOUNT} (${ACCOUNT_HOLDER})`);
                showToast(`${amount.toLocaleString()}원 후원\n\n계좌번호가 복사되었습니다!\n토스 앱이나 인터넷뱅킹에서 송금해주세요.\n\n${TOSS_ACCOUNT}\n(${ACCOUNT_HOLDER})`);
            }
        }

        function sendCustomAmountToss() {
            const amount = parseInt(document.getElementById('customAmountToss').value);
            
            if (!amount || amount < 1000) {
                showToast('최소 1,000원 이상 입력해주세요.');
                return;
            }
            
            openToss(amount);
        }

        function copyTossAccount() {
            copyToClipboard(`토스뱅크 ${TOSS_ACCOUNT} (${ACCOUNT_HOLDER})`);
            showToast('계좌번호가 복사되었습니다!');
        }

        // 카카오페이
        function copyAndNotifyKakao(amount) {
            const text = `토스뱅크 ${TOSS_ACCOUNT} (${ACCOUNT_HOLDER}) ${amount}원`;
            
            copyToClipboard(text).then(() => {
                showToast(`${amount}원 후원 정보가 복사되었습니다!\n카카오페이에서 송금해주세요.`);
                
                if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                    setTimeout(() => {
                        window.location.href = 'kakaotalk://';
                    }, 1000);
                }
            });
        }

        function sendCustomAmountKakao() {
            const amount = parseInt(document.getElementById('customAmountKakao').value);
            
            if (!amount || amount < 1000) {
                showToast('최소 1,000원 이상 입력해주세요.');
                return;
            }
            
            copyAndNotifyKakao(amount);
        }

        function copyKakaoAccount() {
            copyToClipboard(`토스뱅크 ${TOSS_ACCOUNT} (${ACCOUNT_HOLDER})`);
            showToast('계좌번호가 복사되었습니다!');
        }

        // 유틸리티 함수
        function copyToClipboard(text) {
            if (navigator.clipboard) {
                return navigator.clipboard.writeText(text);
            } else {
                const textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.style.position = 'fixed';
                textarea.style.opacity = '0';
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                return Promise.resolve();
            }
        }

        // showToast 함수는 ui-utils.js에서 사용

        // 엔터키로 후원
        document.getElementById('customAmountToss').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendCustomAmountToss();
        });

        document.getElementById('customAmountKakao').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendCustomAmountKakao();
        });

        // CSS 애니메이션은 donate-refactored.css에서 관리
    </script>
</body>
</html>
